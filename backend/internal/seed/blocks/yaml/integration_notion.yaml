# Notion API基盤ブロック
---
slug: notion-api
version: 2
name: Notion API
description: Notion API基盤ブロック
category: apps
subcategory: notion
icon: file-text
parent_block_slug: bearer-api
enabled: true

config_defaults:
  base_url: https://api.notion.com/v1
  secret_key: NOTION_API_KEY

config_schema:
  type: object
  properties:
    api_key:
      type: string
      title: API Key
      x-ui-widget: secret-key

pre_process: |
  // api_key -> auth_key にマッピング（親のbearer-api用）
  if (config.api_key && !config.auth_key) {
      config.auth_key = config.api_key;
  }
  return {
      ...input,
      headers: {
          ...(input.headers || {}),
          'Notion-Version': '2022-06-28'
      }
  };

ui_config:
  icon: file-text
  color: "#000000"

error_codes:
  - code: NOTION_001
    name: API_KEY_NOT_CONFIGURED
    description: API Keyが設定されていません
    retryable: false
