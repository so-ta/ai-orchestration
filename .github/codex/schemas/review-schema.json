{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["findings", "verdict", "summary"],
  "properties": {
    "summary": {
      "type": "string",
      "description": "変更内容の要約（2-3文）"
    },
    "good_points": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "良い変更点のリスト"
    },
    "findings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["file", "title", "body", "severity", "in_pr_diff"],
        "properties": {
          "file": {
            "type": "string",
            "description": "ファイルパス"
          },
          "start_line": {
            "type": "integer",
            "description": "開始行番号"
          },
          "end_line": {
            "type": "integer",
            "description": "終了行番号"
          },
          "title": {
            "type": "string",
            "description": "問題のタイトル（日本語）"
          },
          "body": {
            "type": "string",
            "description": "詳細説明（日本語）"
          },
          "severity": {
            "type": "string",
            "enum": ["critical", "high", "medium", "low"],
            "description": "重要度"
          },
          "category": {
            "type": "string",
            "enum": ["security", "performance", "quality", "test", "documentation"],
            "description": "カテゴリ"
          },
          "in_pr_diff": {
            "type": "boolean",
            "description": "このPRの差分に含まれるかどうか"
          },
          "suggested_code": {
            "type": "string",
            "description": "修正後のコード（suggestion用）"
          }
        }
      },
      "description": "指摘事項のリスト"
    },
    "verdict": {
      "type": "string",
      "enum": ["APPROVE", "REQUEST_CHANGES", "COMMENT"],
      "description": "最終判定"
    },
    "verdict_reason": {
      "type": "string",
      "description": "判定理由（日本語）"
    }
  }
}
